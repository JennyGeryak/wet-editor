"use strict";var Editor=function(){function e(e,t){function i(e){return!1}if(void 0!=e){this.editor_name=e,this.container=new Array,this.work_space=new Array,this.symbol_buffer=new Array,this.console=new Array,this.line=new Array,this.current_line=new Array,void 0!=Observable&&(Observable.apply(this,arguments),this.subscribe(Key_Observer));for(var n=0;n<document.getElementsByClassName(this.editor_name).length;n++){this.container[n]=document.getElementsByClassName(this.editor_name)[n],this.container[n].style.position="relative",this.symbol_buffer[n]=document.createElement("textarea"),this.symbol_buffer[n].className="symbol_buffer",this.symbol_buffer[n].cols="1",this.symbol_buffer[n].rows="1",this.symbol_buffer[n].style.opacity="0",this.container[n].appendChild(this.symbol_buffer[n]),this.work_space[n]=document.createElement("ol"),this.work_space[n].className="result",this.work_space[n].style.border="1px solid #000",this.work_space[n].style.height="500px",this.work_space[n].onselectstart=function(){return!1},this.work_space[n].onmousedown=i,this.container[n].appendChild(this.work_space[n]),this.line[n]=new Array,this.current_line[n]=1,this.line[n][this.current_line[n]]=document.createElement("li"),this.line[n][this.current_line[n]].className="wet-line",this.line[n][this.current_line[n]].setAttribute("line_number",this.current_line[n]),this.work_space[n].appendChild(this.line[n][this.current_line[n]]);var r=document.createElement("span");r.className="wet-line-start active",r.innerHTML="",this.line[n][this.current_line[n]].appendChild(r),1==t.console&&(this.console[n]=document.createElement("div"),this.console[n].className="console",this.console[n].style.border="1px solid #000",this.console[n].style.position="absolute",this.console[n].style.top="0px",this.console[n].style.right="0px",this.console[n].style.width="200px",this.console[n].style.height="50px",this.container[n].appendChild(this.console[n])),this.work_space[n].object=this,this.work_space[n].index=n,this.work_space[n].key_scope=Key_Scope.getInstance(),this.work_space[n].onclick=function(){this.object.symbol_buffer[this.index].focus()},this.symbol_buffer[n].object=this,this.symbol_buffer[n].index=n,this.symbol_buffer[n].key_scope=Key_Scope.getInstance(),this.symbol_buffer[n].onkeydown=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"pressed")},this.symbol_buffer[n].onkeyup=function(e){void 0!=Observable&&this.object.publish(this.object,this.key_scope,this.index,e,"relised")},this.symbol_buffer[n].onblur=function(){this.key_scope.clearKeyMap()}}}else console.log("sorry but you have not add any name to editors name field")}return e}(),Char_Class_Generator=function(){function e(e){return s=e,a=s.charCodeAt(0),47>=a||a>=58&&64>=a||a>=91&&96>=a||a>=122&&126>=a?o=c+"signifier":a>=48&&57>=a?o=c+"numeral":(a>=65&&90>=a||a>=97&&122>=a)&&(o=c+"character"),e.length>=1&&"wet-line-start"==e&&(o="wet-line-start"),this}function t(e){s=e,a=s.charCodeAt(0);for(var t=[{start_code:32,end_code:32,desc:"space"},{start_code:33,end_code:33,desc:"exclamation"},{start_code:34,end_code:34,desc:"quotation "},{start_code:35,end_code:35,desc:"hash"},{start_code:36,end_code:36,desc:"dollar"},{start_code:37,end_code:37,desc:"percent"},{start_code:38,end_code:38,desc:"ampersand"},{start_code:39,end_code:39,desc:"apostrophe"},{start_code:40,end_code:40,desc:"left_parenthesis"},{start_code:41,end_code:41,desc:"right_parenthesis"},{start_code:42,end_code:42,desc:"asterix"},{start_code:43,end_code:43,desc:"plus"},{start_code:44,end_code:44,desc:"comma"},{start_code:45,end_code:45,desc:"hyphen"},{start_code:46,end_code:46,desc:"period"},{start_code:47,end_code:47,desc:"slash"},{start_code:58,end_code:58,desc:"colon"},{start_code:59,end_code:59,desc:"semicolon"},{start_code:60,end_code:60,desc:"less_than"},{start_code:61,end_code:61,desc:"equals"},{start_code:62,end_code:62,desc:"greater_than"},{start_code:63,end_code:63,desc:"question"},{start_code:64,end_code:64,desc:"at"},{start_code:65,end_code:90,desc:"uppercase"},{start_code:91,end_code:91,desc:"left_square_vrecket"},{start_code:92,end_code:92,desc:"backslash"},{start_code:93,end_code:93,desc:"right_square_vrecket"},{start_code:94,end_code:94,desc:"caret"},{start_code:95,end_code:95,desc:"underscore"},{start_code:96,end_code:96,desc:"grave_accent"},{start_code:123,end_code:123,desc:"left_curly_brace"},{start_code:124,end_code:124,desc:"vertical_bar"},{start_code:125,end_code:125,desc:"left_curly_brace"},{start_code:126,end_code:126,desc:"tilda"}],i=0;i<t.length;i++)o+=a==t[i].start_code?c+t[i].desc:a>=t[i].start_code&&a<=t[i].start_code?c+t[i].desc:"";return this}function i(e){return c=e||"",this}function n(){return o+=" ",this}function r(){return o}var s="",a="",o="",c="";return{mainClass:e,subClass:t,generate:r,setPrefix:i,space:n}},Observable=function(){this.subscribers=new Array,this.subscribe=function(e){this.subscribers.push(e)},this.unsubscribe=function(e){for(var t=0;t<this.subscribers.length;t++)if(this.subscribers[t]===e)return void this.subscribers[t].splice(t,1)},this.publish=function(e,t,i,n,r){for(var s=0;s<this.subscribers.length;s++)this.subscribers[s](e,t,i,n,r)}},Key_Observer=function(e,t,i,n,r){var s=(new Char_Class_Generator("wet-"),new Module.getInstance),a=e.container[i];e.line[i][e.current_line[i]],new Divider,new Director(a,"wet-");return(t.getKeyMap()[0]<"46"&&"16"!=t.getKeyMap()[0])&void 0!=t.getKeyMap()[0]&&(n.preventDefault(),n.stopPropagation()),"13"!=t.getKeyMap()[0]&void 0!=t.getKeyMap()[0]&&(s.setOptions({object:e,index:i}),s.runFunction("key")),"13"==t.getKeyMap()[0]&&(e.symbol_buffer[i].value=""),9==n.keyCode?void("pressed"==r&&(n.preventDefault(),s.setOptions({object:e,index:i}),s.runFunction("9"))):("pressed"==r?(s.setOptions({object:e,index:i}),s.runFunction(t.getStringKeyMap()),t.keyDown(n)):"relised"==r&&(s.runFunction(t.getStringKeyMap()),t.keyUp(n)),void(void 0!=e.console[i]&&(console.log(t.getKeyMap()),e.console[i].innerHTML=t.getKeyMap())))},Key_Scope=function(){function e(){function e(e){if(0==o.length)o.push(e);else{for(var t=0;t<=o.length;t++)o[t]==e&&(c=!0);0==c&&o.push(e),c=!1}}function t(e){for(var t=0;t<=o.length;t++)o[t]==e&&o.splice(t,1)}function i(t){var i;window.event?i=t.keyCode:t.which&&(i=t.which),e(i)}function n(e){var i;window.event?i=e.keyCode:e.which&&(i=e.which),t(i)}function r(){return o.sort()}function s(){return o.sort().toString()}function a(){o=[]}var o=new Array,c=!1;return{keyDown:i,keyUp:n,getKeyMap:r,clearKeyMap:a,getStringKeyMap:s}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),Module=function(){function e(){function e(e){var t=e.getElementsByClassName("active")[0],i=new Char_Class_Generator("wet-");void 0!=t&&(t.className.split(" ").indexOf("wet-line-start")>=0?t.className="wet-line-start":t.className=i.setPrefix("wet-").mainClass(t.innerHTML).space().subClass(t.innerHTML).generate())}function t(e){var t=e.getElementsByClassName("parent")[0];void 0!=t&&(t.className="wet-word")}function i(e,t){o[e]={function_name:t}}function n(){return console.log(o),o}function r(e){(e>0||"key"==e)&&void 0!=o[e]&&(this[o[e].function_name](a)||"")}function s(e){a=e}var a,o={8:{function_name:"backspase"},9:{function_name:"tab"}};return{addFunction:i,dump:n,runFunction:r,key_assotiation:o,setOptions:s,deletePrevioseCursor:e,deletePrevioseParent:t}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),Divider=function(){function e(){this.divide=function(e){for(var t=e.innerHTML,i="",n=t.split(""),r=new Char_Class_Generator("wet-"),s=0;s<n.length;s++)i+='<span class="'+r.setPrefix("wet-").mainClass(n[s]).space().subClass(n[s]).generate()+'">'+n[s]+"</span>";return i},this.concat=function(e){if(void 0==e)return"";if("object"==typeof e){var t=e.innerHTML,i=/(<([^>]+)>)/gi;return t=t.replace(i,"")}if("string"==typeof e){var t=e,i=/(<([^>]+)>)/gi;return t=t.replace(i,"")}},this.bisect=function(e){var t=new Array;t[0]="",t[1]="";var i=0;if(void 0!=e){for(var n=0;n<=e.childNodes.length-1;n++){var r=e.childNodes[n].className.split(" ").indexOf("active");t[i]+=e.childNodes[n].outerHTML,r>=0&&(i=1)}return t}return t},this.trim=function(e,t){var i=new Array;i[0]="",i[1]="";var n=0;if(void 0!=e){for(var r=0;r<=e.childNodes.length-1;r++){var s=e.childNodes[r].className.split(" ").indexOf(t);i[n]+=e.childNodes[r].outerHTML,s>=0&&(n=1)}return i}return i}}return e}(),Director=function(){function e(e,t,i){this.concrete_entity=e,this.prefix=t,this.active=i,this.class_generator=new Char_Class_Generator(this.prefix),this.divider=new Divider,this.isThereAnyActiveWords=function(){var e=this.concrete_entity.getElementsByClassName("parent")[0]||!1;return!!e},this.isCursorFirstOnALine=function(e){var t=this.getCursorEntity(e),i=t.previousSibling||!1;return i?!1:t.className.split(" ").indexOf(this.prefix+"line-start")>=0},this.isCursorBeforeWord=function(e){var t=e.previousSibling,i=t.className.split(" ").indexOf(this.prefix+"word");return i>=0},this.isStart=function(e){return e?e.className.split(" ")[0]==this.prefix+"line-start":!1},this.isSignifier=function(e){return e?e.className.split(" ").indexOf(this.prefix+"signifier")>=0:!1},this.isWord=function(e){return e?e.className.split(" ").indexOf(this.prefix+"word")>=0:!1},this.isParentWord=function(e){return e?e.className.split(" ").indexOf("parent")>=0:!1},this.isCharacter=function(e){var t=this.prefix+"character";return e?e.className.split(" ").indexOf(t)>=0:!1},this.isLine=function(e){var t=this.prefix+"line";return e?e.className.split(" ").indexOf(t)>=0:!1},this.isCursoreBeforeWord=function(e){var t=this.prefix+"word";return e?e.nextSibling.className.split(" ").indexOf(t)>=0:!1},this.isLineEmpty=function(e){this.prefix+"line";if(e){var t=e.childNodes;return 1==t.length?t[0].className==this.prefix+"line-start":!1}return!1},this.isCursorAtTheEndOfWord=function(e){if(e){var t=e.childNodes.length-1,i=e.childNodes[t];return!!this.isCursor(i)}return!1},this.isCursor=function(e){return e?e.className.split(" ").indexOf("active")>=0:!1},this.getCursorEntity=function(e){var t=this.concrete_entity.getElementsByClassName(e)[0]||!1;return t?t:(console.log("getCursorEntity - has error"),!1)},this.getBeforeEntity=function(e){var t=e.previousSibling||!1;return t?t:!1},this.getNextEntity=function(e){var t=e.nextSibling||!1;return t?t:!1},this.getParentWord=function(){var e=this.concrete_entity.getElementsByClassName("parent")[0]||!1;return e?e:!1},this.getLastElement=function(e){var t=e.childNodes[e.childNodes.length-1]||!1;return t?t:!1},this.getCursorPosition=function(e){for(var t=0,i=0;i<e.parentElement.childNodes.length-1;i++){var n=e.parentElement.childNodes[i].className,r=n.split(" ");if(r.indexOf("active")>=0)break;t++}return t},this.getAllAfter=function(e){var t=[];if(e.nextSibling){for(;e.nextSibling;)e=e.nextSibling,t.push(e.outerHTML);return t}return[]},this.makeItParentWord=function(e){e&&(e.className=this.prefix+"word parent")},this.makeItWord=function(e){e&&(e.className=this.prefix+"word")},this.activate=function(e){return e?void(e.className==this.prefix+"line-start"?e.className=this.prefix+"line-start "+this.active:e.className==this.prefix+"word"?e.className=this.prefix+"word parent":e.className=this.class_generator.setPrefix("wet-").mainClass(e.innerHTML).space().subClass(e.innerHTML).space().generate()+this.active):(console.log("activate - has error"),!1)},this.deactivate=function(t){var i=this.prefix+"line-start",n=this.prefix+"tab";if("string"!=typeof t)t.className.split(" ")[0]==i?t.className=this.prefix+"line-start":t.className.split(" ").indexOf(n)>=0?t.className=this.prefix+"signifier "+this.prefix+"tab":t.className=this.class_generator.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate();else{var r=e.getElementsByClassName(t)[0];r=this.class_generator.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate()}},this.setClass=function(e){return e?void(e.className=this.class_generator.setPrefix(this.prefix).mainClass(e.innerHTML).space().subClass(e.innerHTML).generate()):(console.log("deactivate - has error"),!1)},this.plus=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},this.setCursorOnPosition=function(e,t){var i=0;if(0>e)t&&this.activate(t.childNodes[0]);else if(t){for(var n=t.childNodes,r=0;r<n.length;r++)n[r].className.split(" ").indexOf("parent")<0&&n[r].className.split(" ").indexOf("wet-word")>=0&&(n[r].innerHTML=this.divider.divide(n[r]));for(var r=0;r<n.length;r++){var s=!1;if(1==n[r].childNodes.length){if(i>=e){s=!0,this.activate(n[r]);break}i++}else if(n[r].childNodes.length>1)for(var a=n[r].childNodes,o=0;o<a.length;o++){if(console.log(a[o]),i>=e){s=!0,this.makeItParentWord(n[r]),this.activate(a[o]);break}i++}if(s)break}for(var r=0;r<n.length;r++)n[r].className.split(" ").indexOf("parent")<0&&(n[r].innerHTML=this.divider.concat(n[r]))}},this.deactivatePreviouse=function(){var t=e.getElementsByClassName(this.active)[0],i=new Char_Class_Generator(this.prefix);void 0!=t&&(t.className.split(" ").indexOf(this.prefix+"line-start")>=0?t.className=this.prefix+"line-start":t.className=i.setPrefix(this.prefix).mainClass(t.innerHTML).space().subClass(t.innerHTML).generate())},this["delete"]=function(e){e.parentNode.removeChild(e)},this.deleteAllAfter=function(e){for(var t=[];e.nextSibling;)e=e.nextSibling,t.push(e);for(var i=0;i<t.length;i++)this["delete"](t[i])},this.cutAllAfter=function(e){for(var t=[];e.nextSibling;)e=e.nextSibling,t.push(e),this["delete"](e);for(var i=0;i<t.length;i++)this["delete"](t[i]),t[i]=t[i].outerHTML;return t},this.create=function(e,t,i){return"line-start"==e?this.createLineStart(t,i):"word"==e?this.createWord(t,i):"char"==e?this.createChar(t,i):"tab"==e?this.createTab(t,i):"line"==e?this.createLine(t,i):void 0},this.createLineStart=function(e,t){var i=document.createElement("span");i.className=this.prefix+"line-start","active"==t&&(i.className+=" "+this.active);var n=document.createTextNode(e);return i.appendChild(n),i},this.createWord=function(e,t){var i=document.createElement("span");if("active"==t){i.className="wet-word parent";var n=document.createTextNode(e),r=document.createElement("span")}else{i.className="wet-word";var r=e}return"active"==t?(r.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).space().generate()+"active",r.appendChild(n),i.appendChild(r)):i.innerHTML=r,i},this.createChar=function(e,t){var i=document.createTextNode(e),n=document.createElement("span");return"active"==t?n.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).space().generate()+"active":n.className=this.class_generator.setPrefix("wet-").mainClass(e).space().subClass(e).generate(),n.appendChild(i),n},this.createTab=function(e,t){var i=document.createElement("span");return"active"==t?i.className="wet-signifier wet-tab active":i.className="wet-signifier wet-tab",i.innerHTML=e,i},this.createLine=function(e,t){var i=document.createElement("li");return i.className=this.prefix+"line",i.setAttribute("line_number",t),"string"==typeof e?i.innerHTML=e:i.appendChild(e),i},this.findCursorPosition=function(e,t){var i=e.parentNode||!1,n=0;if(!t)if(i.className.split(" ")[0]!=this.prefix+"line")var t=i.parentNode||!1;else var t=i||!1;if(t){for(var r=t.childNodes,s=0;s<r.length;s++)r[s].className.split(" ").indexOf("parent")<0&&r[s].className.split(" ").indexOf(this.prefix+"word")>=0&&(r[s].innerHTML=this.divider.divide(r[s]));for(var s=0;s<r.length;s++){var a=!1;if(1==r[s].childNodes.length){if(r[s].className.split(" ").indexOf("active")>=0){a=!0,n--;break}n++}else if(r[s].childNodes.length>1)for(var o=r[s].childNodes,c=0;c<o.length;c++){if(o[c].className.split(" ").indexOf("active")>=0){a=!0;break}n++}if(a)break}for(var s=0;s<r.length;s++)r[s].className.split(" ").indexOf("parent")<0&&(r[s].innerHTML=this.divider.concat(r[s]))}return++n}}return e}(),first=new Editor("someeditor",{console:!0}),second=new Editor("someeditor_another",{console:!1});Module.getInstance().key=function(e){var t=new Char_Class_Generator("wet-"),i=(new Module.getInstance,e.object.container[e.index]),n=e.object.current_line[e.index],r=e.object.symbol_buffer[e.index].value,s=e.object.line[e.index][n],a=new Divider,o=new Director(i,"wet-","active");if(""==s.innerHTML){o.deactivatePreviouse();var c=o.create("line-start"," ","active");s.innerHTML+=c.outerHTML}if(""!=r){var l=o.getCursorEntity("active");if(l)var d=l.className.split(" ")[0];else var d="";var u=l.nextSibling,v=t.mainClass(r).generate();if("character"==v|"numeral"==v)if(0==o.isThereAnyActiveWords()){if(null==u){var f=o.getBeforeEntity("active"),h=o.create("word",r,"active");o.deactivatePreviouse(),s.appendChild(h)}else if(null!=u&&o.isWord(u)){var g=o.getCursorEntity("active"),p=g.nextSibling;console.log(p);var m=a.divide(p),_=o.create("char",r,"active");p.innerHTML=_.outerHTML+m,p.className="wet-word parent",o.deactivatePreviouse()}else if(null!=u&&o.isSignifier(u)){var g=o.getCursorEntity("active"),b=o.create("word",r,"active");o.plus(g,b),o.deactivate(g)}}else{var f=o.getCursorEntity("active");o.deactivate(l),h=o.getParentWord();var _=(document.createTextNode(r),o.create("char",r,"active"));o.deactivatePreviouse(),null==f.nextSibling?h.appendChild(_):null!=f.nextSibling&&o.plus(f,_)}else if("signifier"==v){var f=o.getCursorEntity("active"),w=f.parentNode,u=o.getNextEntity(f),x=o.getNextEntity(w),y=o.create("char",r,"active");if(o.isParentWord(w)){if(o.isCursorAtTheEndOfWord(w))x?x&&(o.deactivate(f),o.makeItWord(w),w.innerHTML=a.concat(w),o.plus(w,y)):(o.deactivate(f),o.makeItWord(w),w.innerHTML=a.concat(w),s.innerHTML+=y.outerHTML);else if(!o.isCursorAtTheEndOfWord(w)){var N=a.trim(w,"active"),C=a.concat(N[1]),b=o.create("word",C,"active");b.innerHTML=a.concat(b),console.log(b),w.innerHTML=N[0],w.innerHTML=a.concat(w),x?x&&(o.deactivate(f),o.makeItWord(w),w.innerHTML=a.concat(w),o.plus(w,y)):(o.makeItWord(w),w.innerHTML=a.concat(w),s.innerHTML+=y.outerHTML,s.innerHTML+=b.outerHTML)}}else o.isParentWord(w)||(u?u&&(o.plus(f,y),o.deactivate(f)):(o.deactivate(f),s.innerHTML+=y.outerHTML))}"wet-line-start"==d&&(l.className="wet-line-start"),e.object.symbol_buffer[e.index].value=""}};var module=new Module.getInstance;module.addFunction("key","key"),Module.getInstance().backspase=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),i=new Divider,n=new Director(t,"wet-","active"),r=n.getCursorEntity("active"),s=n.getBeforeEntity(r),a=r.nextSibling;if(s)if(n.isCursorBeforeWord(r)){n.makeItParentWord(s);var o=n.getParentWord();o.innerHTML=i.divide(o);var c=n.getLastElement(o);if(n.activate(c),n.isWord(a)){var l=i.divide(a);o.innerHTML+=l,n["delete"](a)}n["delete"](r)}else n["delete"](r),n.activate(s);else if(0!=n.getParentWord()&&"wet-line-start"!=n.getParentWord().previousSibling.className){var o=n.getParentWord(),d=n.getBeforeEntity(o);n.activate(d),n["delete"](o)}else if(0!=n.getParentWord()&&"wet-line-start"==n.getParentWord().previousSibling.className){var o=n.getParentWord(),d=n.getBeforeEntity(o);d.className="wet-line-start active",n["delete"](o)}else if(n.isStart(r)){var u=r.parentNode,v=n.getBeforeEntity(u);if(0!=v){if(!n.isLineEmpty(u)){var f=v.childNodes,h=f[f.length-1],l="";n.isWord(h)&&n.isWord(r.nextSibling)&&(console.log(r.nextSibling),l=i.divide(r.nextSibling),n["delete"](r.nextSibling));var g=i.bisect(u);g=g[1]}if(n["delete"](u),e.object.current_line[e.index]--,o=v.childNodes[v.childNodes.length-1],!n.isSignifier(o)){o.innerHTML=i.divide(o);var p=n.getLastElement(o);n.activate(p),h.innerHTML+=l}var m=n.getLastElement(v);n.activate(m),n.isLineEmpty(u)||(v.innerHTML+=g);var r=n.getCursorEntity("active"),_=n.getBeforeEntity(r);if(0!=_&&n.isWord(r)){r.className="wet-word parent",console.log("word");var b=r.childNodes.length-1,w=r.childNodes[b];n.activate(w)}}}};var module=new Module.getInstance;module.addFunction("8","backspase"),Module.getInstance().left_arrow=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),i=new Divider,n=new Director(t,"wet-","active"),r=n.getCursorEntity("active"),s=n.getBeforeEntity(r);if(0!=s)if(n.isStart(s))n.deactivate(r),n.activate(s);else if(n.isWord(s)){n.makeItParentWord(s),o=n.getParentWord(),o.innerHTML=i.divide(o);var a=n.getLastElement(s);n.activate(a),n.deactivate(r)}else n.deactivate(r),n.activate(s);else if(0!=n.getParentWord()&&"wet-line-start"!=n.getParentWord().previousSibling.className){var o=n.getParentWord(),c=n.getBeforeEntity(o);c.className.split(" ").indexOf("active")>=0?(n.makeItWord(o),o.innerHTML=i.concat(o),this.left_arrow(e)):(n.activate(c),n.deactivate(r),o.innerHTML=i.concat(o),o.className="wet-word")}else if(0!=n.getParentWord()&&"wet-line-start"==n.getParentWord().previousSibling.className){var o=n.getParentWord(),c=n.getBeforeEntity(o);n.activate(c),n.deactivate(r),o.innerHTML=i.concat(o),n.makeItWord(o)}else if(n.isCursorFirstOnALine("active")){var l=r.parentNode,d=n.getBeforeEntity(l);if(0!=d){n.deactivate(r),e.object.current_line[e.index]--,o=d.childNodes[d.childNodes.length-1],0==n.isSignifier(o)&&(o.innerHTML=i.divide(o));var u=n.getLastElement(d);if(n.isWord(u)){n.makeItParentWord(u);var v=n.getLastElement(u);n.activate(v)}else n.activate(u);var r=n.getCursorEntity("active"),s=n.getBeforeEntity(r);if(0!=s&&n.isWord(r)){n.makeItParentWord(r);var v=n.getLastElement(r);console.log(v),n.activate(v)}}}};var module=new Module.getInstance;module.addFunction("37","left_arrow"),Module.getInstance().tab=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),i=new Divider,n=new Director(t,"wet-","active"),r=n.getParentWord(),s=n.getCursorEntity("active"),a=e.object.current_line[e.index]-1;s||(s=document.getElementsByClassName("wet-line-start")[a],n.activate(s));var o=0,c=s.parentElement.childNodes.length||!1,l=n.create("tab","&#09;","active");if(o=0!=c?n.getCursorPosition(s):!1,o==c-1)r?(n.deactivate(s),void 0!=r&&(r.innerHTML=i.concat(r)),this.deletePrevioseParent(t),r.parentNode.insertBefore(l,r.nextSibling)):n.isCursorFirstOnALine("active")?s.nextSibling?(n.deactivate(s),n.plus(s,l)):(n.deactivate(s),s.parentElement.appendChild(l)):(n.deactivate(s),s.nextSibling?n.plus(s,l):s.parentElement.appendChild(l));else if(c-1>o|1==o)if(0!=r){var d=i.bisect(r),u=document.createElement("span");u.className="wet-word",u.innerHTML=d[0];var v=document.createElement("span");v.className="wet-word",v.innerHTML=d[1],v.innerHTML=i.concat(v),r.parentNode.insertBefore(l,r.nextSibling),r.innerHTML=i.concat(u),s=t.getElementsByClassName("active")[0],s.parentNode.insertBefore(v,s.nextSibling),this.deletePrevioseParent(t)}else n.isCursorBeforeWord(s)?(s.parentNode.insertBefore(l,s.nextSibling),n.deactivate(s)):(n.deactivate(s),s.nextSibling?s.parentNode.insertBefore(l,s.nextSibling):s.parentElement.appendChild(l))};var module=new Module.getInstance;module.addFunction("9","tab"),Module.getInstance().enter=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),i=new Divider,n=new Director(t,"wet-","active"),r=t.getElementsByClassName("parent")[0],s=n.getCursorEntity("active");if(n.isThereAnyActiveWords("parent")){var a=0,o=s.parentElement.childNodes.length||!1;if(a=0!=o?n.getCursorPosition(s):!1,a==o-1){r.innerHTML=i.concat(r);var c=i.trim(r.parentNode,"parent");r.parentNode.innerHTML=c[0],this.deletePrevioseCursor(t),this.deletePrevioseParent(t);var l=e.object.current_line[e.index],d=e.object.line[e.index][l];e.object.current_line[e.index]++;var u=e.object.current_line[e.index],v=n.create("line-start","","active"),f=n.create("line",v,u);e.object.line[e.index][u]=f,""!=c&&(f.innerHTML+=c[1]),n.plus(d,f)}else{var h=i.bisect(r),g=h[0],p=h[1];r.innerHTML=g;var m=n.getAllAfter(r);m=m.join(""),n.deleteAllAfter(r),p=n.create("word",p),p.innerHTML=i.concat(p);var _=p.outerHTML+m,l=e.object.current_line[e.index],d=e.object.line[e.index][l];e.object.current_line[e.index]++;var u=e.object.current_line[e.index],b=n.create("line-start","","active");b=b.outerHTML+_;var f=n.create("line",b,u);e.object.line[e.index][u]=f,n.plus(d,f),this.deletePrevioseCursor(t),r.innerHTML=i.concat(r),this.deletePrevioseParent(t)}}else if(n.isCursorFirstOnALine("active")){var s=n.getCursorEntity("active");console.log(s);var w=n.getAllAfter(s);w=w.join(""),this.deletePrevioseCursor(t);var l=e.object.current_line[e.index],d=e.object.line[e.index][l];e.object.current_line[e.index]++;var u=e.object.current_line[e.index],b=n.create("line-start","","active"),x=b.outerHTML+w,f=n.create("line",x,u);e.object.line[e.index][u]=f,n.plus(d,f),d.innerHTML=b.outerHTML,this.deletePrevioseCursor(t)}else{var y=s.nextSibling;r&&(r.innerHTML=i.concat(r)),this.deletePrevioseParent(t);var l=e.object.current_line[e.index],d=e.object.line[e.index][l];e.object.current_line[e.index]++;var u=e.object.current_line[e.index];if(null==y)var b=n.create("line-start","","active"),f=n.create("line",b,u);else{var b=n.create("line-start","","active"),N=i.bisect(d)[1];d.innerHTML=i.bisect(d)[0],b=b.outerHTML+N;var f=n.create("line",b,u)}e.object.line[e.index][u]=f,n.plus(d,f),this.deletePrevioseCursor(t)}};var module=new Module.getInstance;module.addFunction("13","enter"),Module.getInstance()["delete"]=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),i=new Divider,n=new Director(t,"wet-","active"),r=(n.getParentWord(),n.getCursorEntity("active")),s=n.getNextEntity(r),a=(n.getBeforeEntity(r),r.parentNode);if(n.isSignifier(s))n["delete"](s);else if(n.isWord(s))0!=s.childNodes.length&&(n.isParentWord(s)||(s.innerHTML=i.divide(s),n.makeItParentWord(s)),n["delete"](s.childNodes[0])),0==s.childNodes.length&&n["delete"](s);else if(n.isCharacter(s))n["delete"](s);else{var o=n.getNextEntity(a),c=(n.getBeforeEntity(a),a.parentNode);if(n.isWord(a)){if(n.isSignifier(o))n["delete"](o);else if(n.isWord(o)){o.innerHTML=i.divide(o),n["delete"](o.childNodes[0]);var l=o.innerHTML;a.innerHTML+=l,n["delete"](o)}else if(n.isLine(c.nextSibling)){var d=c.nextSibling,u=d.childNodes[1];if(u){if(n.getParentWord())if(n.isWord(u)){a.innerHTML+=i.divide(u),n["delete"](u);var l=i.trim(d,"wet-line-start");c.innerHTML+=l[1]}else{var l=i.trim(d,"wet-line-start");c.innerHTML+=l[1]}n["delete"](d)}else u||n["delete"](c.nextSibling)}}else if(n.isSignifier(r)){if(n.isSignifier(o));else if(n.isWord(o));else if(n.isLine(a.nextSibling)){var d=a.nextSibling,u=d.childNodes[1],l=i.trim(d,"wet-line-start");a.innerHTML+=l[1],n["delete"](d)}}else n.isLine(a)}};var module=new Module.getInstance;module.addFunction("46","delete"),Module.getInstance().right_arrow=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),i=new Divider,n=new Director(t,"wet-","active"),r=(n.getParentWord(),n.getCursorEntity("active")),s=n.getNextEntity(r),a=(n.getBeforeEntity(r),r.parentNode);if(n.isSignifier(s))n.deactivate(r),n.activate(s);else if(n.isCharacter(s))n.deactivate(r),n.activate(s);else if(n.isWord(s))n.makeItParentWord(s),s.innerHTML=i.divide(s),n.activate(s.childNodes[0]),n.deactivate(r);else if(0==s){var o=n.getNextEntity(a),c=a.parentNode||!1,l=c.nextSibling||!1;n.isSignifier(o)?(n.deactivate(r),n.isWord(a)&&(a.innerHTML=i.concat(a),n.makeItWord(a)),n.activate(o)):n.isLine(o)?(n.deactivate(r),n.activate(o.childNodes[0]),e.object.current_line[e.index]++):o||l&&(n.isWord(a)&&(a.innerHTML=i.concat(a),n.makeItWord(a)),e.object.current_line[e.index]++,n.activate(l.childNodes[0]))}};var module=new Module.getInstance;module.addFunction("39","right_arrow"),Module.getInstance().up_arrow=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),i=new Divider,n=new Director(t,"wet-","active"),r=n.getParentWord(),s=n.getCursorEntity("active"),a=(n.getNextEntity(s),n.getBeforeEntity(s),s.parentNode),o=r.parentNode||!1;o||(o=a||!1);var c=n.getBeforeEntity(o),l=n.findCursorPosition(s,c);if(c){var d=n.findCursorPosition(s);console.log(d,l),n.isCursorFirstOnALine("active")?(n.deactivate(s),n.setCursorOnPosition(-1,c)):(d>l&&(d=l),n.deactivate(s),r?(r.innerHTML=i.concat(r),n.makeItWord(r),n.setCursorOnPosition(--d,c)):n.setCursorOnPosition(d,c),e.object.current_line[e.index]--)}else console.log("bad")};var module=new Module.getInstance;module.addFunction("38","up_arrow"),Module.getInstance().down_arrow=function(e){var t=(new Char_Class_Generator("wet-"),e.object.container[e.index]),i=new Divider,n=new Director(t,"wet-","active"),r=n.getParentWord(),s=n.getCursorEntity("active"),a=(n.getNextEntity(s),n.getBeforeEntity(s),s.parentNode),o=r.parentNode||!1;o||(o=a||!1);var c=n.getNextEntity(o),l=n.findCursorPosition(s,c);if(c){var d=n.findCursorPosition(s);console.log(d,l),n.isCursorFirstOnALine("active")?(n.deactivate(s),n.setCursorOnPosition(-1,c)):(d>l&&(d=l),n.deactivate(s),r?(r.innerHTML=i.concat(r),n.makeItWord(r),n.setCursorOnPosition(--d,c)):n.setCursorOnPosition(d,c),e.object.current_line[e.index]++)}else console.log("bad")};var module=new Module.getInstance;module.addFunction("40","down_arrow");
//# sourceMappingURL=app.min.js.map